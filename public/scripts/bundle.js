(()=>{class t{constructor(t,e,s,n){this.img=t,this.alt=e,this.title=s,this.parent=document.querySelector(n)}render(){const t=document.createElement("div");t.innerHTML=`<div class="good-card">\n                <img src=${this.img} alt=${this.alt} class="goods-main">\n                <div class="green-category">\n                    ${this.title}\n                </div>\n            </div>`,this.parent.append(t)}}class e{constructor(t,e,s,n,i){this.img=t,this.alt=e,this.title=s,this.price=n,this.parent=document.querySelector(i)}render(){const t=document.createElement("div");t.innerHTML=`<div class="good-card">\n                <img src=${this.img} alt=${this.alt} class="goods-main">\n                <div class="title-disc">\n                    <p class="title-disc">${this.title}</p>\n                    <p class="price-disc">${this.price} руб.</p>\n                </div>\n                <div class="green-category-disc">\n                    Добавить в корзину\n                </div>\n            </div>`,this.parent.append(t)}}const s=async t=>{const e=await fetch(t);if(!e.ok)throw new Error(`Could not fetch ${t}, status: ${e.status}`);return await e.json()};function n(){o.classList.add("hide"),o.classList.remove("show"),document.body.style.overflow=""}s("db.json").then((e=>{e.menu.forEach((({img:e,alt:s,title:n})=>{new t(e,s,n,".goods").render()}))})),s("discounts.json").then((t=>{t.menu.forEach((({img:t,alt:s,title:n,price:i})=>{new e(t,s,n,i,".goods-discounts").render()}))}));const i=document.querySelector("#login-enter"),o=document.querySelector(".login-div"),c=document.querySelector("main");o.classList.add("hide"),i.addEventListener("click",(()=>{o.classList.add("show"),o.classList.remove("hide"),document.body.style.overflow="hidden"})),c.addEventListener("click",(t=>{o.contains(t.target)||n()})),document.addEventListener("keydown",(t=>{"Escape"===t.code&&o.classList.contains("show")&&n()})),document.querySelector(".form-login").addEventListener("submit",(t=>{t.preventDefault(),async function(t,e){try{const s=await fetch("/login",{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify({email:t,password:e})});await s.json(),s.ok?(alert("Вход успешно выполнен"),n(),window.location.href="http://localhost:3001/#"):(console.log("Ошибка входа"),alert("Неверный логин или пароль"))}catch(t){console.log("Ошибка соединения",t),alert("Ошибка соединения с сервером")}}(document.querySelector("#email-user").value,document.querySelector("#pass-user").value)}))})();
//# sourceMappingURL=bundle.js.map